<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
     <script type="text/javascript" src="./bundle.js"></script>
    <link rel="stylesheet" href="../styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
    <title>Cleveland Economic Data</title>
  </head>
  <body>
    <h1>Cleveland Median Household Income</h1>
    <canvas id="myChart" width="400" height="400"></canvas>

      <script>

      let results;
      function initialize() {
    // Setting URL and headers for request
        var options = {
        url: 'https://api.datausa.io/api/?sort=desc&show=geo&required=income%2Cincome_moe&sumlevel=all&year=all&geo=01000US%2C04000US39%2C05000US39035%2C31000US17460%2C16000US3916000',
        };
        return new Promise(function(resolve, reject) {
            fetch(options, function(err, resp, body) {
                if (err) {
                    reject(err);
                } else {
                    resolve(JSON.parse(body));
                }
            })
        })
      }



      let ctx = document.getElementById("myChart");
      let myChart = new Chart(ctx, {
          type: 'horizontalBar',
          data: {
              labels: ["United States", "Ohio", "Cuyahoga County", "Cleveland", "Cleveland-Elyria Metro area"],
              datasets: [{
                  label: 'Median Household Income',
                  data: [12, 19, 3, 5, 6],
                  backgroundColor: [
                      'rgba(255, 99, 132, 0.2)',
                      'rgba(54, 162, 235, 0.2)',
                      'rgba(255, 206, 86, 0.2)',
                      'rgba(75, 192, 192, 0.2)',
                      'rgba(153, 102, 255, 0.2)',
                      'rgba(255, 159, 64, 0.2)'
                  ],
                  borderColor: [
                      'rgba(255,99,132,1)',
                      'rgba(54, 162, 235, 1)',
                      'rgba(255, 206, 86, 1)',
                      'rgba(75, 192, 192, 1)',
                      'rgba(153, 102, 255, 1)',
                      'rgba(255, 159, 64, 1)'
                  ],
                  borderWidth: 1
              }]
          },
          options: {
              scales: {
                  yAxes: [{
                      ticks: {
                          beginAtZero:true
                      }
                  }]
              }
          }
      });
    </script>
  </body>
</html>
